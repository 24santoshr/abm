<div class="wrapper" ng-show="loading">
	<span class="cssload-loader"></span>
</div>

<div ng-controller="collectionController as cc" ng-hide="loading">
	<hr>
	<form name="form" role="form" style="overflow: auto;">
	
		<div class ="form-actions pull-left"
			ng-class="{ 'has-error': form.name.$dirty && form.name.$error.required }">
			<div align="center"><label>Collection Information</label></div>
			<div class="form-group"><label for="name">Name:</label>&nbsp<input type="text" name="name"
				id="name" ng-model="cc.collection.name"
				required ng-disabled="cc.saving" /> </div>
			<span ng-show="form.name.$dirty && form.name.$error.required"
			class="help-block">Name is required</span>
			<div>
				<label class="created-at">Created: {{cc.collection.creation_date | date:'short'}}</label>			
			</div>
			<div>
				<label>Author: {{cc.collection.user}}</label>			
			</div>
			<div>
				<label>ID: {{cc.collection.id}}</label>			
			</div>
				<div class="form-actions pull-left">
					<button ng-disabled="loading || cc.saving"
						ng-click="cc.remove(cc.collection.id)" class="btn btn-sm btn-danger"
						title="Delete" confirm="Removal is irreversible! Continue?">
						<i class="glyphicon glyphicon-trash"></i> Delete Collection
					</button>
					
					<button ng-disabled="loading || cc.saving" title="Save Changes"
						class="btn btn-primary btn-sm" ng-click="cc.update()">Save
						Changes</button>		
				</div>
		</div>
		<div class="form-actions" style="display: flex;">
		<div style="margin-top: 20px; margin-left:5%; width: 95%;" align="center"
	ng-class="{ 'has-error': form.description.$dirty && form.description.$error.required }">
	<label align="center" for="description">Description</label>
	<textarea rows='3' type="description" style="width: 100%;"
		name="description" id="description" class="form-control"
		ng-model="cc.collection.description" required ng-disabled="cc.saving"></textarea>
	<span
		ng-show="form.description.$dirty && form.description.$error.required"
		class="help-block">Description is required</span>
		</div>
			
	</div>




</form>
<hr>
<div class = "form-actions" style="overflow: auto;">
<div class="form-actions pull-left">
	<div align="center"><label>Build Information</label></div>
	<div><label>Version Comment: {{cc.version.comment}}</label></div>
	<div><label>Created: {{cc.version.creationDate | date: 'short'}}</label></div>
	<div ng-show="cc.collection.privateStatus"><label>Privacy: Private</label></div>
	<div ng-hide="cc.collection.privateStatus"><label>Privacy: Public</label></div>
	<div class="form-actions pull-left">
		<button ng-disabled="loading || cc.saving" title="Make Public"
			class="btn btn-primary btn-sm">New Version</button>
		<button ng-disabled="loading || cc.saving" title="Make Public"
			class="btn btn-primary btn-sm">Make Public</button>
		<button ng-disabled="loading || cc.saving" title="Make Public"
			class="btn btn-sm btn-danger">Delete Version</button>
	</div>
		
</div>
<div style="display:flex">
<div style="width: 100%">
			<button ng-disabled="loading || cc.saving || cc.version.frozen"
				class="btn btn-primary btn-sm"">Edit Project(s)</button>
			<button ng-disabled="loading || cc.saving || cc.version.frozen"
				class="btn btn-primary btn-sm"">Download Hermes Results</button>
</div>

<div style="width: 100%">
<table class="table table-bordered table-striped" >
	<col width="*">
	<col width="*">
	<col width="5%">
	<tr>
		<th>Name</th>
		<th>Commit</th>
		<th></th>
	</tr>
	<tr ng-repeat="commit in cc.version.commits">
		<td>{{commit.repository.name}}</td>
		<td>
			<div class="dropdown" ng-hide="cc.version.frozen">
				<button class="btn btn-default btn-xs dropdown-toggle"
					ng-click="cc.selectCommit(commit)" type="button" id="commitSelect"
					data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
					<span style="font-family: monospace">{{commit.commitId}}</span> <span
						class="caret" ng-hide="loading"></span>
				</button>
			</div> <span style="font-family: monospace" ng-show="cc.version.frozen">{{commit.commitId}}</span>
		</td>
		<td><ngcart-addtocart id="{{ commit.repository.id }}"
				name="{{ commit.repository.name }}" price="1" quantity="1"
				quantity-max="30" data="commit.repository"></ngcart-addtocart></td>
	</tr>
</table>
</div>

</div> 
</div>
