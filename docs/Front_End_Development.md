# ABM Front End

The module de.fraunhofer.abm.app contains all the files associated with the UI for the ABM webpage, along with all the REST endpoints it calls.  
  
Adding functionality to the front end may require defining new DTOs or queries, which is done in the modules .domain, .collection.dao, and .collection.dao.jpa.  
Adding new features or modifying existing ones may require modifications to the modules associated with those functions.  
  
This module also uses AngularJS extensively, so you should have at least a basic understanding of it before modifying the UI.  

## Accessing the Webpage

The webpage can be found at http://localhost:8080/de.fraunhofer.abm/index.html#/ after you have launched it through the method described in the developer manual.  

## General Structure

The module is comprised of three major sections. The HTML files in the folder "static", the JS files in "web", and the Java files in the source folder.  
  
The static folder contains all the HTML files in the application.  
Most of these files are .htm files in template folder. Most of these templates are inserted into the index files using the routing feature of AngularJS, which is defined
in the 00_main.js file in the web folder, and by modifying the routing in that file you can change which templates are loaded with certain URLs.  
Note that the .htm files that start with the word "modal" should not be inserted into the index file, as they are used as the body of a uib modal window.  
This folder also contains the index file, which defines elements that should be displayed on every page. (Here, this is the header and sidebar, as well as a footer that has been commented out.)  
Additionally, this folder contains some libraries of HTML elements. You can use any of them, but the only part of them you should modify is the ng-cart .html files in the template folder. Ng-cart is being used to track which repos the user has selected to add to a collection, and these files are inserted into other .htm files to display information about the user's selection.  
  
The web folder contains all the JS files used by the webpage, as well as the .css file.  
This section is simple, the Angular controllers are in the controllers folder, the filters are in the filters folder, and the services are in the services folder.  
  
The source folder contains all the Java files that are directly accessed by the front end.  
This is mostly the REST endpoints in the .app.controllers package, but also includes the download function in the .app.download package, the websocket that tracks the progress of ongoing processes in the .app.websocket package, and the files that control the login function and the configuration of the email service in the .app package.  

## Notes

The webpage has recently undergone some large changes. Because of this, there might be some unused methods and files in this module. Some of these might be intended to be implemented in an upcoming feature, but most of them were used in a now obsolete feature. Delete them if you can confirm these are useless.  
  
The Basalmiq file UIMockup.bmpr (located in the docs folder) contains the mockup of the desired future UI. You don't have to conform exactly to it, but it's useful to get a general idea of what the final UI should look like.
  
Take a look at the uib library if you have the time. Many of the HTML elements could be useful, and some of them can replace hard-coded HTML elements in the current version of the webpage.  
  
If you change your local database to implement a new feature, you should also note what changes were made in the Developer Manual and make the same changes on the production server.  
  
There is very little documentation in this module. This is a known issue, and if you have any questions about this module ask the last person who worked on it.  

## TODO (as of September 1st, 2017)

* **Allow user to access the results generated by Hermes.** The back end for this was not implemented when I last worked on this project, but it should be done by the time you start working on it. This should be done on the page filterResult.htm. In the long term, this page should display detailed information about the progress of Hermes and the results of any finished Hermes processes. For now, it's more practical to simply display a line of text informing the user if the Hermes process has been finished or not, and allow them to download the .csv file produced by Hermes if it has. Once you've done this, uncomment the 'Run Hermes' button on the edit collection page and confirm everything works.  
  
* **Test the registration notification system.** The webpage should send an email to each administrator when a user registers a new account. I've tested this system with a different configuration (which can be changed in EmailConfiguration.java), but not with the current one. It should work, but you should confirm it does.  
  
* **Allow public collections to be built.** Currently you have to own a collection to build it, and the owner of a public collection can only interact with it in the same ways any other user can. This means if a collection is made public without building it, it cannot be built by anyone and is effectively useless. There a few different ways to solve this problem, such as allowing anyone to build a public collection or automatically building all versions of a collection when it is made public. Just make sure that there's always a way to use any given collection.  
  
* **Allow the creation of empty collections.** Allowing the creation of empty collections shouldn't be too hard, but there might be some errors when displaying them.  
  
* **Improve general code quality.**